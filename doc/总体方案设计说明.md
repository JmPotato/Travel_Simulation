# 总体方案设计说明

## 1. 基本数据
将收集到的 12 个城市之间的三类交通工具时刻表存储在 Sqlite 数据库的数据表中，方便后续维护与数据的读取。

数据格式（表头）为：

| 出发地 | 目的地 | 航班号/车次 | 出发时间 | 耗时 | 价格 |
| --- | --- | --- | --- | --- | --- |

## 2.旅行查询功能

1.最少费用策略

​	暂时不考虑花费，从数据库中选出每两个城市之间花费最少的交通方式，以此价格为权值建立一个12*12的有向图。Graph类中实现了Dijkstra 算法，当调用一次Dijkstra 算法，即可算出从指定的起点城市到终点城市的最少花费。确定了最少花费以后，再在Strategy类中安排好旅行路线，具体做法是从数据库中读取出时刻表，根据已确定的最少花费调整各段路径的开始和结束时间，最终形成一个合理的旅行方案

2.最少时间策略
​	
	该策略主要采用深度优先搜索和回溯算法，目的是为了尽可能遍历从起点城市到终点城市的所有路径。从起点城市开始一直往前搜索，直到搜索到终点城市。然后回溯，算出另一条路径，比较两条路径的时间开销，保留最小者为最佳路径。然后继续搜索新路径，判断是否需要更改最佳路径，直到遍历了所有路径。
	在具体实现时，考虑到如果一条路径的中转城市过多（比如10个），这既不符合实际情况（要求最少时间的情况下不可能有太多的中转城市），也增加了大量的不必要的计算，增加了时间复杂度。所以我们只遍历了中间城市不多于三个的情况。

3.限时最少费用策略

在策略二的基础上结合策略一，得出限时最少费用的旅行方案。

如果没有满足限时条件的方案，需要提示用户相关信息。

## 3.图形交互界面
采用 Qt 图形库，只设计旅行查询界面的 UI 界面，完成与用户交互的功能。

具体设计方案如下：

**这里放图片**

## 4.旅行模拟功能
1.在数据库中添加用户日志的数据表，记录用户状态。

2.用户可以自己选择旅行模拟时间与现实时间的比例。

3.地图绘制功能拟定采用高德地图的 API 进行绘制。

